---
import ListWork from '@components/ListWork.astro';
import { languageKeys } from '@i18n/ui';
import { useTranslations } from '@i18n/utils';
import BaseLayout from '@layouts/BaseLayout.astro'
import { getPostsByLocale } from '@utils/paths'

export async function getStaticPaths() {
  return languageKeys.map(lang => ({params: { locale: lang }}))
}

const { locale } = Astro.params;
const t = useTranslations(locale);
const pageTitle = t('nav.work');
const allPosts = await getPostsByLocale('work', locale);
---

<BaseLayout pageTitle={pageTitle}>
  <ListWork posts={allPosts} basePath={`${locale}/trabajo`} lang={locale} />
</BaseLayout>
